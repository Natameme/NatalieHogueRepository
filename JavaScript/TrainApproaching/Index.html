<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="styles.css">
  <title>TrainApproach</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">

  <link rel="stylesheet" href="styles.css">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>

<script src='TrainAppGeneralized.js'>
</script>

</head>

<body>
<h1>Train Approaching Tool</h1>
<h2 id='stat'> </h2>

<div id="mapid"></div>
<script>
async function leaflet(){
  var ulat;
  var ulon;
 //Leaflet.js parameters
 const attribution ='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';
 const mymap = L.map('mapid').setView([42.355749, -71.061617], 13);

      const tileUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
      const tiles = L.tileLayer(tileUrl, { attribution });
      tiles.addTo(mymap);
await navigator.geolocation.getCurrentPosition(function(position) {
    //defines ulat and ulon variables
      ulat = position.coords.latitude;
      ulon = position.coords.longitude;
    var umarker = L.marker([ulat,ulon]).addTo(mymap);
      });
      await fetch(Tstatus);
      var q = Tstatus.length;
      for(p=0;p<=q;p++){
      vPos = [Tstatus[p].Lat, Tstatus[p].Lon];
      var vMarker = L.marker(vPos).addTo(mymap);
    }
  }
leaflet();

</script>

<h1>Status Board</h1>
<h3 id='board'> </h3>
<p>Note: only showing first 10 vehicles</p>

<h1>Filter By Line</h1>

<h3 id="display"> </h3>

<input type="checkbox" id="Green-B" name="Green-B" value="Green-B">
  <label for="Green-B"> Green Line B Branch </label><br>

<input type="checkbox" id="Green-C" name="Green-C" value="Green-C">
  <label for="Green-C"> Green Line C Branch </label><br>

<input type="checkbox" id="Green-D" name="Green-D" value="Green-D">
  <label for="Green-D"> Green Line D Branch </label><br>

<input type="checkbox" id="Green-E" name="Green-E" value="Green-E">
  <label for="Green-E"> Green Line E Branch </label><br>

<input type="checkbox" id="Orange" name="Orange" value="Orange">
  <label for="Orange"> </label> Orange Line<br>

<input type="checkbox" id="Blue" name="Blue" value="Blue">
  <label for="Blue"> </label>Blue Line<br>

<input type="checkbox" id="Red" name="Red" value="Red">
  <label for="Red"> </label>Red Line<br>

<input type="checkbox" id="Mattapan" name="Mattapan" value="Mattapan">
  <label for="Mattapan"> </label>Mattapan Trolley<br>

<input type="checkbox" id="CR-Worcester" name="CR-Worcester" value="CR-Worcester">
  <label for="CR-Worcester"> </label>Commuter Rail Worcester Line<br>

<input type="checkbox" id="CR-Newburyport" name="CR-Newburyport" value="CR-Newburyport">
  <label for="CR-Newburyport"> </label>Commuter Rail Newburyport Line<br>

<input type="checkbox" id="CR-Middleborough" name="CR-Middleborough" value="CR-Middleborough">
  <label for="CR-Middleborough"> </label>Commuter Rail Middleborough Line<br>

<input type="checkbox" id="CR-Greenbush" name="CR-Greenbush" value="CR-Greenbush">
  <label for="CR-Greenbush"> </label>Commuter Rail Greenbush Line<br>

<input type="checkbox" id="CR-Lowell" name="CR-Lowell" value="CR-Lowell">
  <label for="CR-Lowell"> </label>Commuter Rail Lowell Line<br>

<input type="checkbox" id="CR-Franklin" name="CR-Franklin" value="CR-Franklin">
  <label for="CR-Franklin"> </label>Commuter Rail Franklin Line<br>

<input type="checkbox" id="CR-Fitchburg" name="CR-Fitchburg" value="CR-Fitchburg">
  <label for="CR-Fitchburg"> </label>Commuter Rail Fitchburg Line<br>

<input type="checkbox" id="CR-Haverhill" name="CR-Haverhill" value="CR-Haverhill">
  <label for="CR-Haverhill"> </label>Commuter Rail Haverhill Line<br>

<input type="checkbox" id="CR-Providence" name="CR-Providence" value="CR-Providence">
  <label for="CR-Providence"> </label>Commuter Rail Providence Line<br>

</body>
</html>
